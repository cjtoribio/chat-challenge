<!doctype html>
<html ng-app="chatApp">

<head>
	<!-- Stylesheets -->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/dist/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">


	<script src="/socket.io/socket.io.js"></script>
	<script src="vendor/jquery/dist/jquery.min.js" type="text/javascript"></script>
	<script src="vendor/angular/angular.min.js" type="text/javascript"></script>
	<script src="app/app.js" type="text/javascript"></script>
	<script src="app/services.js" type="text/javascript"></script>
	<script src="app/controllers.js" type="text/javascript"></script>

	<!-- directives -->
	<script src="app/directives/attachments.js" type="text/javascript"></script>
	<script src="app/directives/attributes.js" type="text/javascript"></script>
	<script src="app/directives/eventsContainers.js" type="text/javascript"></script>

</head>

<body ng-controller="MainController">
	<div class="row chatContainer">
		<div class="conversationPanel  col-sm-8 col-sm-offset-2">

			<!-- Panel for Room and Personal Info -->
			<div class="roomInfoPanel row" align="center">

				<!-- Room selection form -->
				<form class="form-inline col-md-6" 
					  ng-submit="(currentRoom.connected ? leave : join)(newRoom)">
					<div class="input-group">		
						<div class="input-group-addon">Room</div>
						<input class="form-control" ng-model="newRoom"
							   ng-readonly="currentRoom.connected"/>
						<div class="input-group-btn">
							<button class="btn btn-default" 
									ng-if="currentRoom.connected">Leave</button>
							<button class="btn btn-default" 
									ng-if="!currentRoom.connected">Join</button>
						</div>
					</div>
				</form>

				<!-- Change name form -->
				<form ng-submit="changeName(newNickname)" class="form-inline col-md-6">
					<div class="input-group">	
							<div class="input-group-addon">
								<span ng-bind="user.nickname"></span>
							</div>	
							<input ng-model="newNickname" class="form-control"
								   placeholder="New Nickname" />
							<div class="input-group-btn">
								<button class="btn btn-default" >Change</button>
							</div>
					</div>
				</form>
			</div>


			<!-- message Viewer -->
			<div class="messagesPanel row">
				<events-viewer events="currentRoom.events">
				</events-viewer>
			</div>


			<!-- new Message form -->
			<div class="newMessagePanel row">
				<form ng-submit="send(newMessage)" >
					<fieldset ng-disabled="!currentRoom.connected">
						<div class="input-group">
								<input class="form-control" ng-model="newMessage"  />
								<div class="input-group-btn">
									<button class="btn btn-default" >Send</button>
								</div>	
						</div>
					</fieldset>
				</form>
			</div>
		</div>

	</div>
</body>

</html>
