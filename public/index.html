<!doctype html>
<html ng-app="chatApp">

<head>
	<!-- Stylesheets -->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/dist/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">


	<script src="/socket.io/socket.io.js"></script>
	<script src="vendor/jquery/dist/jquery.min.js" type="text/javascript"></script>
	<script src="vendor/angular/angular.min.js" type="text/javascript"></script>
	<script src="app/app.js" type="text/javascript"></script>
	<script src="app/services.js" type="text/javascript"></script>
	<script src="app/controllers.js" type="text/javascript"></script>
</head>

<body ng-controller="MainController">
	<div class="conversationPanel  col-md-8 col-md-offset-2">
		<div class="roomInfoPanel form-inline" align="center">
			<div class="input-group">		
				<div class="input-group-addon">Room</div>
				<input class="form-control" ng-model="newRoom"
					   ng-readonly="currentRoom.connected"/>
				<div class="input-group-btn">
					<button class="btn btn-default" 
							ng-click="leave(newRoom)"
							ng-if="currentRoom.connected">Leave</button>
					<button class="btn btn-default" 
							ng-click="join(newRoom)"
							ng-if="!currentRoom.connected">Join</button>
				</div>
			</div>
			<div class="input-group">		
				<input ng-model="newNickname" class="form-control" />
				<div class="input-group-btn">
					<button class="btn btn-default" 
							ng-click="changeName(newNickname)">ChageName</button>
				</div>
			</div>
		</div>
		<div class="messagesPanel">
			<div ng-repeat="event in currentRoom.events" ng-switch="event.type">
				<div ng-switch-when="action" class="action actionBubble">
					{{event.message}}
				</div>
				<div ng-switch-when="message" class="media messageBubble" >
					<div class="media-left media-top">
						<img class="media-object" src="imgs/uknown.png" 
							 style="width: 50px; height: 50px;">
					</div>
					<div class="media-body">
						<h5 class="media-heading">{{event.user}} <i>says:</i></h5>
						{{event.message}}
					</div>
				</div>
			</div>
		</div>
		<div class="newMessagePanel">
			<form ng-submit="send(newMessage)">
				<div class="input-group">
					<input class="form-control" ng-model="newMessage" />
					<div class="input-group-btn">
						<button class="btn btn-default " >Send</button>
					</div>
				</div>
			</form>
		</div>
	</div>

	<audio src="https://ssl.gstatic.com/chat/sounds/incoming_message_eb39ce414e3ffba41a8e173581dc7248.mp3" 		   autostart="false" width="0" height="0" id="newMessage" >
</body>

</html>
